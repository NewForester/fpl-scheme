<!DOCTYPE html>
<html lang="en-GB">
    <!-- scheme notes by NewForester is licensed under a Creative Commons Attribution-ShareAlike 4.0 International Licence. -->
<head>
    
<meta charset="UTF-8" /> <meta name="description" content="Notes on the Yet Another Scheme Introduction tutorial" /> <meta name="keywords" content="Scheme" /> <meta name="author" content="NewForester" /> <meta name="viewport" content="width=device-width, initial-scale=1.0" /> <link rel="stylesheet" href="../styles/style-sheet.css" />
<title>
Scheme Notes: Vectors and Structures
</title>
</head>

<body>
<h1 id="scheme">Scheme</h1>
<h2 id="vectors-and-structures">Vectors and Structures</h2>
<p>Lists and numbers are the most commonly used data types in Scheme but there are others.</p>
<p>This chapter introduces Scheme macros. These are covered in greater detail in a later chapter.</p>
<hr /><!-- Vectors -->

<p>In Scheme, <code>vectors</code> are sets of heterogeneous data indexed by integer. They are more compact than lists and random access is faster. However, they are manipulated using side effects.</p>
<p>Literal vectors are represented thus:</p>
<pre class="sourceCode scheme"><code class="sourceCode scheme">    &#39;#(<span class="dv">1</span> <span class="dv">2</span> <span class="dv">3</span>)                           <span class="co">; a vector of integers</span>
    &#39;#(a <span class="dv">0</span> <span class="ch">#\a</span>)                         <span class="co">; a heterogeneous vector comprising a symbol, an integer and a character</span></code></pre>
<p>Vector specific functions are:</p>
<pre class="sourceCode scheme"><code class="sourceCode scheme">    (<span class="kw">vector?</span> obj)                       <span class="co">; #t if obj is a vector</span>

    (<span class="kw">make-vector</span> k)                     <span class="co">; create a vector with k elements</span>
    (<span class="kw">make-vector</span> k fill)                <span class="co">; ditto and set each element to the value of (fill)</span>

    (<span class="kw">vector</span> obj1 obj2 ...)              <span class="co">; returns a vector comprising obj1 obj2 ...</span>

    (<span class="kw">vector-length</span> <span class="kw">vector</span>)              <span class="co">; the length of the vector (aka number of elements)</span>

    (<span class="kw">vector-ref</span> <span class="kw">vector</span> k)               <span class="co">; returns the k-th element of the vector</span>
    (<span class="kw">vector-set!</span> <span class="kw">vector</span> k obj)          <span class="co">; sets the k-th element of vector to obj</span>

    (<span class="kw">vector-fill!</span> <span class="kw">vector</span> fill)          <span class="co">; sets all the items of vector to (fill)</span>

    (vector-&gt;list <span class="kw">vector</span>)               <span class="co">; converts vector to a list</span>
    (list-&gt;vector <span class="kw">list</span>)                 <span class="co">; converts list to a vector</span></code></pre>
<hr /><!-- Structures -->

<p>In Scheme, <code>structures</code> are composite heterogeneous data indexed by name. There are generated by Scheme macros that automatically create accessors and setters.</p>
<p>Structures are not defined in R<sub>5</sub>RS but many Scheme implementations implement structures similar to those of Common Lisp.</p>
<p>The implementation of <code>structure</code> is based on <code>vector</code>. Each element of the vector is named using a <code>macro</code>.</p>
<p>Structures are defined using the <code>define-structure</code> function. One way of doing this is:</p>
<pre class="sourceCode scheme"><code class="sourceCode scheme">    (define-structure book title authors publisher year isbn)

    (<span class="kw">define</span><span class="fu"> bazaar</span>
      (make-book
        <span class="st">&quot;The Cathedral and the Bazaar&quot;</span>
        <span class="st">&quot;Eric S. Raymond&quot;</span>
        <span class="st">&quot;O&#39;Reilly&quot;</span>
        <span class="dv">1999</span>
        <span class="dv">0596001088</span>))</code></pre>
<p>However, this relies on the order of parameters.</p>
<p>The <code>keyword-constructor</code> option allows for a clearer constructor:</p>
<pre class="sourceCode scheme"><code class="sourceCode scheme">    (define-structure (book keyword-constructor copier)
      title authors publisher year isbn)

    (<span class="kw">define</span><span class="fu"> bazaar</span>
      (make-book
        &#39;title      <span class="st">&quot;The Cathedral and the Bazaar&quot;</span>
        &#39;authors    <span class="st">&quot;Eric S. Raymond&quot;</span>
        &#39;publisher  <span class="st">&quot;O&#39;Reilly&quot;</span>
        &#39;year       <span class="dv">1999</span>
        &#39;isbn       <span class="dv">0596001088</span>))</code></pre>
<p>The <code>copier</code> option creates a copy function for the structure.</p>
<p>The following illustrates the functions created by the macro:</p>
<pre class="sourceCode scheme"><code class="sourceCode scheme">    (book? bazaar)                      <span class="co">; test whether bazaar is a book structure</span>
    (copy-book bazaar)                  <span class="co">; return a copy of the book bazaar</span>

    (book-title bazaar)                 <span class="co">; return the title field</span>
    (set-book-year! bazaar <span class="dv">2001</span>)        <span class="co">; set the year field</span></code></pre>
<hr /><!-- Aside -->

<p>You can compile functions so they execute faster:</p>
<pre class="sourceCode scheme"><code class="sourceCode scheme">    (compile-file <span class="st">&quot;mastermind.scm&quot;</span>)
    (<span class="kw">load</span> <span class="st">&quot;mastermind&quot;</span>)
    (mastermind)</code></pre>
</body>
</html>


